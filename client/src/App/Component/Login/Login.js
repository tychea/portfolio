import { useForm } from 'react-hook-form';
import RedirectAuth from '../WithAuth/RedirectAuth';
import { withRouter } from 'react-router-dom';
import axios from 'axios';
function Login(props) {
  const { register, handleSubmit, errors } = useForm();
  const formSubmit = async (data) => {
    try {
      const config = {
        headers: {
          'Content-Type': 'application/json',
        },
      };
      const body = JSON.stringify(data);
      const res = await axios.post('/api/users/login', body, config);
      localStorage.setItem('token', res.data.token);
      props.updateToken(res.data.token);
      props.history.push('/dashboard');
    } catch (error) {
      console.log(error);
    }
  };

  return (
    <div className='container'>
      <div className='leftPage'>
        <svg id='svg' width="734" height="557" viewBox="0 0 734 557" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id="searchUser" clip-path="url(#clip0)">
            <path id="Vector" d="M750 550H31V546H750V550Z" fill="#489687" />
            <path id="Vector_2" opacity="0.1" d="M690.096 302.352C664.292 337.799 672.807 388.396 687.723 428.706C692.719 442.2 698.394 456.472 695.804 471.153C692.64 489.101 677.771 502.549 662.314 509.873C634.137 523.222 600.852 521.09 575.647 504.271C553.896 489.754 538.585 465.631 516.412 451.807C479.304 428.679 431.129 439.012 389.829 456.67C360.61 469.161 328.603 485.248 300.129 473.714C280.092 465.598 266.6 444.938 259.501 422.853C256.074 412.19 253.675 400.616 246.846 392.269C242.786 387.307 237.421 383.85 231.904 380.96C181.554 354.566 116.789 371.062 67.9748 341.613C35.0189 321.725 14.5072 283.131 5.98477 242.557C-2.53762 201.984 -0.428442 159.153 2.96601 117.055C5.37838 87.138 9.19468 55.1686 27.1622 31.6584C46.1646 6.80207 78.0132 -3.07578 106.494 0.817297C134.974 4.71037 160.508 20.5466 182.846 39.4511C210.786 63.0339 236.491 92.6411 271.24 101.595C294.909 107.692 320.054 103.377 344.659 101.47C385.788 98.2893 426.772 101.951 467.506 106.089C506.499 110.048 545.763 114.469 582.693 127.448C608.827 136.633 629.543 153.993 654.148 165.857C670.184 173.591 687.829 175.385 702.923 185.375C721.549 197.681 738.383 219.483 732.919 245.645C727.758 270.515 703.806 283.54 690.096 302.352Z" fill="white" />
            <path id="Vector_3" d="M545.275 25.9253H132.667V524.305H545.275V25.9253Z" fill="url(#paint0_linear)" />
            <path id="Vector_4" d="M537.062 34H135V519.645H537.062V34Z" fill="white" />
            <g id="User Profile">
              <circle id="Ellipse 13" cx="336.31" cy="150.69" r="74.69" fill="#C4C4C4" />
              <path id="Vector_5" d="M335.879 178.995L357.489 162.309C357.489 162.309 343.012 165.417 343.424 142.253C343.419 142.176 343.419 142.099 343.424 142.022C343.424 139.93 343.625 137.637 343.926 135.112C347.633 104.204 317.995 131.401 317.995 131.401C318.25 134.137 318.25 136.892 317.995 139.628C317.995 139.699 317.995 139.779 317.995 139.85C317.409 147.466 315.312 154.889 311.826 161.685C303.779 177.134 335.879 178.995 335.879 178.995Z" fill="#FDC2CC" />
              <path id="Vector_6" opacity="0.1" d="M320.759 135.334C324.426 138.904 326.666 145.391 332.182 145.391C336.173 145.4 340.077 144.228 343.404 142.022C343.404 139.93 343.605 137.637 343.906 135.112C347.614 104.204 317.976 131.401 317.976 131.401C317.976 131.401 321.15 130.305 320.759 135.334Z" fill="black" />
              <path id="Vector_7" d="M332.182 144.386C343.435 144.386 352.557 135.254 352.557 123.988C352.557 112.723 343.435 103.591 332.182 103.591C320.929 103.591 311.807 112.723 311.807 123.988C311.807 135.254 320.929 144.386 332.182 144.386Z" fill="#FDC2CC" />
              <path id="Vector_8" opacity="0.1" d="M351.723 97.8681C350.555 96.3896 349.205 95.0649 347.705 93.9254C345.354 91.9641 342.741 89.9022 339.818 90.0833C338.163 90.3037 336.575 90.8727 335.156 91.7529C327.872 95.595 321.834 91.9641 313.364 103.39C311.556 105.834 307.929 106.407 306.06 108.972C304.192 111.537 303.438 114.906 302.906 118.185C302.466 120.403 302.361 122.675 302.594 124.924C302.817 127.131 303.9 129.162 305.608 130.576C307.557 131.995 310.24 132.005 311.878 133.865C312.701 135.077 313.376 136.384 313.887 137.758C314.55 139.065 315.715 140.302 317.042 140.111C318.368 139.92 319.161 138.482 319.352 137.094C319.435 135.657 319.351 134.216 319.101 132.799C318.85 130.254 319.172 127.479 320.669 125.557C321.673 124.24 323.18 123.455 324.175 122.118C326.566 118.889 325.481 113.468 328.103 110.471C328.87 109.682 329.832 109.112 330.891 108.817C331.95 108.521 333.068 108.513 334.131 108.791C336.243 109.394 338.269 110.267 340.159 111.386C342.797 112.719 345.56 113.787 348.408 114.574C350.799 115.228 353.572 116.797 354.386 113.568C355.662 108.821 354.466 101.66 351.723 97.8681Z" fill="black" />
              <path id="Vector_9" d="M351.723 96.8622C350.555 95.3838 349.205 94.0591 347.705 92.9195C345.354 90.9582 342.741 88.8964 339.818 89.0774C338.163 89.2978 336.575 89.8669 335.156 90.747C327.872 94.5891 321.834 90.9582 313.364 102.384C311.556 104.828 307.929 105.401 306.06 107.966C304.192 110.531 303.438 113.9 302.906 117.179C302.466 119.397 302.361 121.669 302.594 123.918C302.817 126.126 303.9 128.156 305.608 129.571C307.557 130.989 310.24 130.999 311.878 132.859C312.701 134.071 313.376 135.378 313.887 136.752C314.55 138.059 315.715 139.296 317.042 139.105C318.368 138.914 319.161 137.476 319.352 136.088C319.435 134.652 319.351 133.21 319.101 131.793C318.85 129.249 319.172 126.473 320.669 124.552C321.673 123.234 323.18 122.45 324.175 121.112C326.566 117.883 325.481 112.462 328.103 109.465C328.87 108.676 329.832 108.106 330.891 107.811C331.95 107.516 333.068 107.507 334.131 107.785C336.243 108.389 338.269 109.261 340.159 110.38C342.797 111.713 345.56 112.781 348.408 113.568C350.799 114.222 353.572 115.791 354.386 112.563C355.662 107.815 354.466 100.654 351.723 96.8622Z" fill="#865A61" />
              <path id="Vector_10" opacity="0.1" d="M311.807 189.727L311.405 205.166C317.244 206.754 323.268 207.556 329.319 207.549C330.323 207.549 331.378 207.549 332.403 207.479C337.769 207.248 343.087 206.376 348.247 204.884H348.347C349.302 204.602 350.246 204.311 351.181 203.989H351.281L352.135 203.687C355.387 202.541 358.545 201.142 361.579 199.503L361.77 199.402C362.101 199.221 362.433 199.04 362.775 198.849L361.217 178.039L363.699 163.767L350.116 154.504C349.353 155.606 348.499 156.643 347.564 157.602C346.223 159.004 344.653 160.167 342.922 161.042C333.177 165.849 322.085 158.205 316.569 153.478L315.313 152.362C313.887 151.064 313.073 150.179 313.073 150.179L306.281 160.68L311.807 189.727Z" fill="black" />
              <path id="Vector_11" d="M311.807 190.733L311.405 206.171C317.244 207.76 323.268 208.562 329.319 208.555C330.323 208.555 331.378 208.555 332.403 208.485C337.769 208.253 343.087 207.382 348.247 205.89H348.347C349.302 205.608 350.246 205.317 351.181 204.995H351.281L352.135 204.693C355.387 203.546 358.545 202.147 361.579 200.509L361.77 200.408C362.101 200.227 362.433 200.046 362.775 199.855L361.217 179.045L363.699 164.773L350.116 155.51C349.353 156.612 348.499 157.648 347.564 158.608C346.223 160.01 344.653 161.173 342.922 162.047C333.177 166.855 322.085 159.211 316.569 154.484L315.313 153.367C313.887 152.07 313.073 151.185 313.073 151.185L306.281 161.685L311.807 190.733Z" fill="#53526B" />
              <path id="Vector_12" d="M349.462 191.97C349.462 191.97 350.206 197.894 351.18 204.974H351.281L352.135 204.673C355.387 203.526 358.544 202.127 361.579 200.489L361.77 200.388C362.101 200.207 362.433 200.026 362.774 199.835C367.228 197.332 371.387 194.336 375.172 190.903L375.504 190.592C377.579 188.71 379.529 186.694 381.341 184.557L381.552 184.305C377.965 171.844 370.5 167.921 370.5 167.921C370.5 167.921 363.709 164.823 361.85 160.498C359.991 156.174 343.585 147.031 343.585 147.031V147.101C343.585 147.876 343.324 154.967 342.932 162.098C342.681 166.734 342.369 171.391 342.007 174.348C341.929 175.309 341.754 176.259 341.485 177.184C340.209 180.232 349.462 191.97 349.462 191.97Z" fill="#53526B" />
            </g>
            <g id="Tree">
              <path id="Vector_13" d="M621 409H615V547H621V409Z" fill="black" />
              <path id="Vector_14" d="M649.999 424.847C650.214 471.791 617.389 510 617.389 510C617.389 510 584.216 472.097 584.001 425.153C583.786 378.209 616.611 340 616.611 340C616.611 340 649.784 377.903 649.999 424.847Z" fill="#489687" />
            </g>
            <g id="Tree_2">
              <path id="Vector_15" d="M688 409H682V547H688V409Z" fill="black" />
              <path id="Vector_16" d="M716.999 424.847C717.214 471.791 684.389 510 684.389 510C684.389 510 651.216 472.097 651.001 425.153C650.786 378.209 683.611 340 683.611 340C683.611 340 716.784 377.903 716.999 424.847Z" fill="#489687" />
            </g>
            <g id="Tree_3">
              <path id="Vector_17" d="M89 409H83V547H89V409Z" fill="black" />
              <path id="Vector_18" d="M117.999 424.847C118.214 471.791 85.3894 510 85.3894 510C85.3894 510 52.2161 472.097 52.0011 425.153C51.786 378.209 84.6106 340 84.6106 340C84.6106 340 117.784 377.903 117.999 424.847Z" fill="#489687" />
            </g>
            <rect id="Rectangle 19" x="164" y="429" width="342" height="15" fill="#E0E0E0" />
            <rect id="Rectangle 21" x="165" y="281" width="342" height="15" fill="#E0E0E0" />
            <rect id="Rectangle 20" x="164" y="392" width="342" height="15" fill="#E0E0E0" />
            <rect id="Rectangle 24" x="164" y="355" width="342" height="15" fill="#E0E0E0" />
            <rect id="Rectangle 22" x="165" y="318" width="342" height="15" fill="#E0E0E0" />
            <rect id="Rectangle 23" x="165" y="247" width="132" height="12" fill="#489687" />
            <rect id="Rectangle 25" x="417" y="466" width="90" height="44" fill="#489687" />
            <g id="human">
              <path id="Vector_19" d="M552.31 453.968C551.214 454.094 550.106 453.842 549.172 453.254C548.238 452.665 547.532 451.776 547.172 450.732L517.265 364.016C517.057 363.414 516.97 362.778 517.009 362.142C517.047 361.507 517.211 360.885 517.489 360.313C517.768 359.741 518.156 359.229 518.633 358.807C519.109 358.385 519.664 358.061 520.266 357.853L530.668 354.264C531.883 353.846 533.215 353.927 534.37 354.49C535.525 355.053 536.41 356.051 536.829 357.266L566.737 443.982C567.154 445.197 567.073 446.529 566.51 447.684C565.947 448.839 564.95 449.724 563.736 450.145L553.333 453.733C553.002 453.848 552.659 453.927 552.31 453.968Z" fill="#FDC2CC" />
              <path id="Vector_20" d="M539.075 356.002L550.649 391.657C551.097 392.713 551.117 393.898 550.704 394.967C550.291 396.036 549.477 396.908 548.43 397.4L533.2 404.567C532.599 404.85 531.941 404.998 531.275 405C530.608 405.002 529.95 404.858 529.346 404.579C528.743 404.3 528.209 403.892 527.785 403.385C527.36 402.878 527.054 402.285 526.889 401.647L517.245 364.298C516.857 363.182 516.932 361.959 517.455 360.898C517.978 359.837 518.906 359.024 520.035 358.637L533.336 353.243C534.468 352.858 535.708 352.933 536.784 353.45C537.86 353.968 538.684 354.886 539.075 356.002Z" fill="#1C4941" />
              <path id="Vector_21" d="M502.083 548H490.917C489.614 547.999 488.364 547.484 487.442 546.571C486.52 545.657 486.002 544.418 486 543.126V450.874C486.002 449.582 486.52 448.343 487.442 447.429C488.364 446.516 489.614 446.001 490.917 446H502.083C503.386 446.001 504.636 446.516 505.558 447.429C506.48 448.343 506.998 449.582 507 450.874V543.126C506.998 544.418 506.48 545.657 505.558 546.571C504.636 547.484 503.386 547.999 502.083 548Z" fill="#FDC2CC" />
              <path id="Vector_22" d="M526.083 547H514.917C513.614 546.999 512.364 546.484 511.442 545.571C510.52 544.657 510.002 543.418 510 542.126V449.874C510.002 448.582 510.52 447.343 511.442 446.429C512.364 445.516 513.614 445.001 514.917 445H526.083C527.386 445.001 528.636 445.516 529.558 446.429C530.48 447.343 530.998 448.582 531 449.874V542.126C530.998 543.418 530.48 544.657 529.558 545.571C528.636 546.484 527.386 546.999 526.083 547Z" fill="#FDC2CC" />
              <path id="Vector_23" d="M534.819 461H485.181C483.808 460.998 482.491 460.447 481.519 459.465C480.548 458.484 480.002 457.154 480 455.766V374.306C480 366.268 483.161 358.56 488.787 352.876C494.413 347.193 502.044 344 510 344C517.956 344 525.587 347.193 531.213 352.876C536.839 358.56 540 366.268 540 374.306V455.766C539.998 457.154 539.452 458.484 538.481 459.465C537.509 460.447 536.192 460.998 534.819 461Z" fill="#6C6C6C" />
              <path id="Vector_24" d="M543 481H517V338L517.483 338.128C524.805 340.084 531.266 344.324 535.876 350.196C540.485 356.069 542.987 363.251 543 370.64V481Z" fill="#1C4941" />
              <path id="Vector_25" d="M501 481H475V370.64C475.013 363.251 477.515 356.069 482.124 350.196C486.734 344.324 493.195 340.084 500.517 338.128L501 338V409.5V481Z" fill="#1C4941" />
              <path id="Vector_26" d="M510 328C532.091 328 550 310.091 550 288C550 265.909 532.091 248 510 248C487.909 248 470 265.909 470 288C470 310.091 487.909 328 510 328Z" fill="#FDC2CC" />
              <path id="Vector_27" d="M558.892 273.2C558.892 273.2 561.137 211.284 531.957 231.425C531.957 231.425 515.122 175.105 473.971 259.399L462 271.335C462 271.335 515.871 263.875 566 287L558.892 273.2Z" fill="#1C4941" />
              <path id="Vector_28" d="M509.96 307C507.574 306.933 504.606 306.848 502.318 305.148C501.637 304.621 501.078 303.949 500.679 303.179C500.28 302.408 500.051 301.559 500.009 300.689C499.968 300.071 500.067 299.452 500.3 298.879C500.533 298.307 500.893 297.797 501.352 297.39C502.546 296.362 504.291 296.122 506.17 296.684L504.223 282.199L505.653 282L507.942 299.028L506.748 298.471C505.364 297.825 503.464 297.496 502.283 298.511C501.993 298.777 501.767 299.107 501.623 299.475C501.479 299.844 501.42 300.242 501.451 300.637C501.486 301.285 501.658 301.917 501.954 302.49C502.251 303.064 502.665 303.566 503.17 303.962C504.95 305.285 507.316 305.456 510 305.532L509.96 307Z" fill="black" />
              <path id="Vector_29" d="M497 283H489V285H497V283Z" fill="black" />
              <path id="Vector_30" d="M522 283H514V285H522V283Z" fill="black" />
              <g id="rightHand">
                <path id="Vector_31" d="M405.649 394.792C405.458 394.497 405.3 394.183 405.177 393.854L401.306 383.562C400.856 382.36 400.904 381.029 401.44 379.862C401.976 378.695 402.957 377.787 404.166 377.337L490.553 345.304C491.764 344.857 493.104 344.904 494.279 345.437C495.454 345.969 496.369 346.943 496.822 348.144L500.692 358.437C500.916 359.032 501.02 359.666 500.997 360.301C500.974 360.936 500.826 361.56 500.56 362.138C500.295 362.716 499.917 363.237 499.449 363.67C498.981 364.103 498.431 364.44 497.832 364.662L411.446 396.695C410.406 397.08 409.264 397.101 408.21 396.755C407.156 396.409 406.253 395.717 405.649 394.792Z" fill="#FDC2CC" />
                <path id="Vector_32" d="M490.616 342.287L455.226 356.502C454.111 356.84 453.168 357.597 452.592 358.617C452.017 359.637 451.853 360.84 452.135 361.979L456.242 378.542C456.404 379.196 456.709 379.806 457.133 380.328C457.557 380.85 458.091 381.27 458.696 381.559C459.3 381.848 459.961 381.999 460.631 382C461.301 382.001 461.962 381.853 462.568 381.565L498.055 364.741C499.18 364.316 500.091 363.459 500.59 362.359C501.089 361.259 501.134 360.005 500.717 358.871L496.451 344.969C496.03 343.835 495.178 342.915 494.084 342.413C492.99 341.91 491.743 341.865 490.616 342.287Z" fill="#1C4941" />
                <g id="Scope">
                  <path id="Vector_33" d="M404.552 395.576C403.787 395.868 402.939 395.84 402.196 395.498C401.453 395.156 400.874 394.529 400.588 393.754L385.847 353.835C385.561 353.06 385.591 352.201 385.93 351.447C386.268 350.694 386.888 350.106 387.653 349.815C388.418 349.524 389.266 349.552 390.009 349.893C390.752 350.235 391.33 350.862 391.617 351.637L406.358 391.557C406.644 392.331 406.614 393.19 406.275 393.944C405.937 394.698 405.317 395.285 404.552 395.576Z" fill="#489687" />
                  <path id="Vector_34" d="M389.751 355.778C385.07 357.534 379.973 357.862 375.104 356.721C370.236 355.58 365.816 353.022 362.402 349.369C358.988 345.717 356.734 341.134 355.925 336.201C355.117 331.267 355.789 326.205 357.858 321.654C359.926 317.103 363.298 313.267 367.547 310.633C371.796 307.998 376.731 306.682 381.728 306.851C386.726 307.02 391.56 308.667 395.621 311.584C399.682 314.5 402.787 318.555 404.543 323.236C406.89 329.513 406.65 336.465 403.877 342.565C401.104 348.666 396.024 353.418 389.751 355.778ZM374.214 314.363C370.703 315.679 367.661 318.007 365.473 321.052C363.286 324.098 362.05 327.723 361.923 331.47C361.796 335.217 362.784 338.918 364.76 342.104C366.737 345.29 369.614 347.819 373.028 349.37C376.442 350.922 380.24 351.426 383.94 350.819C387.641 350.213 391.078 348.523 393.818 345.963C396.558 343.403 398.477 340.089 399.333 336.438C400.189 332.788 399.942 328.966 398.625 325.455C396.855 320.751 393.29 316.942 388.714 314.862C384.137 312.783 378.923 312.603 374.214 314.363Z" fill="#489687" />
                </g>
              </g>
            </g>
          </g>
          <defs>
            <linearGradient id="paint0_linear" x1="338.971" y1="524.311" x2="338.971" y2="25.9253" gradientUnits="userSpaceOnUse">
              <stop stop-color="#808080" stop-opacity="0.25" />
              <stop offset="0.54" stop-color="#808080" stop-opacity="0.12" />
              <stop offset="1" stop-color="#808080" stop-opacity="0.1" />
            </linearGradient>
            <clipPath id="clip0">
              <rect width="734" height="557" fill="white" />
            </clipPath>
          </defs>
        </svg>


      </div>
      <div className='rightPage'>
        <form className='form' onSubmit={handleSubmit(formSubmit)}>
          <div className='formTitle'>Welcome Back</div>
          <div className='formInputWrapper'>
            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope-open-text" class="svg-inline--fa fa-envelope-open-text fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M176 216h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16zm-16 80c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16H176c-8.84 0-16 7.16-16 16v16zm96 121.13c-16.42 0-32.84-5.06-46.86-15.19L0 250.86V464c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V250.86L302.86 401.94c-14.02 10.12-30.44 15.19-46.86 15.19zm237.61-254.18c-8.85-6.94-17.24-13.47-29.61-22.81V96c0-26.51-21.49-48-48-48h-77.55c-3.04-2.2-5.87-4.26-9.04-6.56C312.6 29.17 279.2-.35 256 0c-23.2-.35-56.59 29.17-73.41 41.44-3.17 2.3-6 4.36-9.04 6.56H96c-26.51 0-48 21.49-48 48v44.14c-12.37 9.33-20.76 15.87-29.61 22.81A47.995 47.995 0 0 0 0 200.72v10.65l96 69.35V96h320v184.72l96-69.35v-10.65c0-14.74-6.78-28.67-18.39-37.77z"></path></svg>
            <input className='inputField' type='text' name='email' placeholder='email'
              ref={register({
                required: 'email is required',
                pattern: {
                  value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,
                  message: 'invalid email address',
                },
              })}>
            </input>
          </div>
          <div className="errorMessage">{errors.email && errors.email.message}</div>
          <div className='formInputWrapper'>
            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="lock" class="svg-inline--fa fa-lock fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"></path></svg>
            <input className='inputField' type='password' name='password' placeholder='password' ref={register({
              required: 'Password is required',
              minLength: {
                value: 6,
                message: 'Password minimum 6 charector',
              },
            })}>
            </input>
          </div>
          <div className="errorMessage">{errors.password && errors.password.message}</div>
          <input className='formButton' type='submit' value='Login' />
        </form>
      </div>
    </div >

  );
}

export default withRouter(RedirectAuth(Login));
